C:\Python39\lib\site-packages\pydantic\_internal\_fields.py:151: UserWarning: Field "model_name" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
C:\Python39\lib\site-packages\pydantic\_internal\_fields.py:151: UserWarning: Field "model_type" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
E:\Code\Emergent-storyboard-\backend\server.py:286: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.6/migration/
  @validator('url')
E:\Code\Emergent-storyboard-\backend\server.py:308: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.6/migration/
  @validator('image_url')
E:\Code\Emergent-storyboard-\backend\server.py:316: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.6/migration/
  @validator('video_url')
E:\Code\Emergent-storyboard-\backend\server.py:372: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.6/migration/
  @validator('length')
E:\Code\Emergent-storyboard-\backend\server.py:378: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.6/migration/
  @validator('timeline_position')
E:\Code\Emergent-storyboard-\backend\server.py:387: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.6/migration/
  @validator('position')
E:\Code\Emergent-storyboard-\backend\server.py:4480: DeprecationWarning: 
        on_event is deprecated, use lifespan event handlers instead.

        Read more about it in the
        [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
        
  @app.on_event("startup")
E:\Code\Emergent-storyboard-\backend\server.py:4506: DeprecationWarning: 
        on_event is deprecated, use lifespan event handlers instead.

        Read more about it in the
        [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
        
  @app.on_event("shutdown")
{"timestamp": "2025-11-02T08:06:47.883686", "level": "INFO", "logger": "storycanvas", "message": "Starting application...", "module": "server", "function": "startup_db_client", "line": 5687, "taskName": "Task-2"}
{"timestamp": "2025-11-02T08:06:47.883981", "level": "INFO", "logger": "database", "message": "Attempting to connect to MongoDB (attempt 1/5)", "module": "database", "function": "connect", "line": 47, "taskName": "Task-2"}
{"timestamp": "2025-11-02T08:06:47.884109", "level": "INFO", "logger": "database", "message": "MongoDB URL: mongodb://***@192.168.1.10:27017", "module": "database", "function": "connect", "line": 48, "taskName": "Task-2"}
{"timestamp": "2025-11-02T08:06:47.911494", "level": "INFO", "logger": "database", "message": "Successfully connected to MongoDB database: storyboard", "module": "database", "function": "connect", "line": 66, "taskName": "Task-2"}
{"timestamp": "2025-11-02T08:06:47.911703", "level": "INFO", "logger": "storycanvas", "message": "Active models service initialized", "module": "server", "function": "startup_db_client", "line": 5699, "taskName": "Task-2"}
{"timestamp": "2025-11-02T08:06:47.917066", "level": "INFO", "logger": "storycanvas", "message": "Repositories initialized for queue, gallery, and batch services", "module": "server", "function": "startup_db_client", "line": 5717, "taskName": "Task-2"}
{"timestamp": "2025-11-02T08:06:47.917209", "level": "INFO", "logger": "storycanvas", "message": "Application started successfully", "module": "server", "function": "startup_db_client", "line": 5718, "taskName": "Task-2"}
{"timestamp": "2025-11-02T08:06:49.409813", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:06:49.409723\", \"message\": \"Request started\", \"request_id\": \"57a3ca98-ce8d-463a-be29-74fe088e1be8\", \"method\": \"GET\", \"path\": \"/api/\", \"query_params\": \"\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"curl/8.13.0\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:06:49.410451", "level": "WARNING", "logger": "root", "message": "Legacy /api/ endpoint accessed. Client should migrate to /api/v1/", "module": "server", "function": "root", "line": 2672, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:06:49.410827", "level": "WARNING", "logger": "root", "message": "DEPRECATED API CALL: GET /api/ - Migrate to /api/v1 before 2025-06-01", "module": "server", "function": "dispatch", "line": 577, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:06:49.411356", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:06:49.411301\", \"message\": \"Request completed\", \"request_id\": \"57a3ca98-ce8d-463a-be29-74fe088e1be8\", \"method\": \"GET\", \"path\": \"/api/\", \"status_code\": 200, \"duration_ms\": 1.63, \"duration_seconds\": 0.002}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:01.367048", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:01.366945\", \"message\": \"Request started\", \"request_id\": \"33fb57f2-86bf-4507-a301-e0403ef5e176\", \"method\": \"GET\", \"path\": \"/api/v1/projects\", \"query_params\": \"\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:01.367448", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:01.367365\", \"message\": \"Request started\", \"request_id\": \"7407e9c8-6bfa-4bcb-84c4-5fcf1d591c95\", \"method\": \"GET\", \"path\": \"/api/v1/comfyui/servers\", \"query_params\": \"\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:01.368194", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:01.368141\", \"message\": \"Request started\", \"request_id\": \"fed4c266-bdf2-43f0-9e8f-ad727514f9f6\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:01.388242", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:01.388108\", \"message\": \"Request error\", \"request_id\": \"33fb57f2-86bf-4507-a301-e0403ef5e176\", \"method\": \"GET\", \"path\": \"/api/v1/projects\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:01.388612", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:01.388520\", \"message\": \"Request completed\", \"request_id\": \"33fb57f2-86bf-4507-a301-e0403ef5e176\", \"method\": \"GET\", \"path\": \"/api/v1/projects\", \"status_code\": 500, \"duration_ms\": 21.62, \"duration_seconds\": 0.022, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:01.390802", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:01.390720\", \"message\": \"Request error\", \"request_id\": \"7407e9c8-6bfa-4bcb-84c4-5fcf1d591c95\", \"method\": \"GET\", \"path\": \"/api/v1/comfyui/servers\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:01.391053", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:01.390975\", \"message\": \"Request completed\", \"request_id\": \"7407e9c8-6bfa-4bcb-84c4-5fcf1d591c95\", \"method\": \"GET\", \"path\": \"/api/v1/comfyui/servers\", \"status_code\": 500, \"duration_ms\": 23.65, \"duration_seconds\": 0.024, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:01.393845", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:01.393717\", \"message\": \"Request error\", \"request_id\": \"fed4c266-bdf2-43f0-9e8f-ad727514f9f6\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:01.394115", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:01.394037\", \"message\": \"Request completed\", \"request_id\": \"fed4c266-bdf2-43f0-9e8f-ad727514f9f6\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 25.95, \"duration_seconds\": 0.026, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:01.616356", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:01.616269\", \"message\": \"Request started\", \"request_id\": \"34604836-b854-4fff-8766-10c4ff1b8788\", \"method\": \"GET\", \"path\": \"/api/v1/comfyui/servers\", \"query_params\": \"\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:01.619336", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:01.619230\", \"message\": \"Request error\", \"request_id\": \"34604836-b854-4fff-8766-10c4ff1b8788\", \"method\": \"GET\", \"path\": \"/api/v1/comfyui/servers\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:01.619623", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:01.619534\", \"message\": \"Request completed\", \"request_id\": \"34604836-b854-4fff-8766-10c4ff1b8788\", \"method\": \"GET\", \"path\": \"/api/v1/comfyui/servers\", \"status_code\": 500, \"duration_ms\": 3.29, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:01.697522", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:01.697409\", \"message\": \"Request started\", \"request_id\": \"68c81d3e-968b-4e43-85b6-6be465644978\", \"method\": \"GET\", \"path\": \"/api/v1/projects\", \"query_params\": \"\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:01.700144", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:01.700059\", \"message\": \"Request error\", \"request_id\": \"68c81d3e-968b-4e43-85b6-6be465644978\", \"method\": \"GET\", \"path\": \"/api/v1/projects\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:01.700416", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:01.700311\", \"message\": \"Request completed\", \"request_id\": \"68c81d3e-968b-4e43-85b6-6be465644978\", \"method\": \"GET\", \"path\": \"/api/v1/projects\", \"status_code\": 500, \"duration_ms\": 2.92, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:04.066570", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:04.066476\", \"message\": \"Request started\", \"request_id\": \"151dc27e-addf-45eb-a16b-afa14f1fa6c2\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:04.071442", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:04.071334\", \"message\": \"Request error\", \"request_id\": \"151dc27e-addf-45eb-a16b-afa14f1fa6c2\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:04.071738", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:04.071640\", \"message\": \"Request completed\", \"request_id\": \"151dc27e-addf-45eb-a16b-afa14f1fa6c2\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 5.2, \"duration_seconds\": 0.005, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:07.103003", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:07.102878\", \"message\": \"Request started\", \"request_id\": \"94bb61a6-af43-4df2-a325-42a1983573da\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:07.106767", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:07.106654\", \"message\": \"Request error\", \"request_id\": \"94bb61a6-af43-4df2-a325-42a1983573da\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:07.107046", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:07.106966\", \"message\": \"Request completed\", \"request_id\": \"94bb61a6-af43-4df2-a325-42a1983573da\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 4.16, \"duration_seconds\": 0.004, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:10.065891", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:10.065802\", \"message\": \"Request started\", \"request_id\": \"f8ccb93b-e52f-4cc9-965e-1d171ba09ec4\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:10.068313", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:10.068218\", \"message\": \"Request error\", \"request_id\": \"f8ccb93b-e52f-4cc9-965e-1d171ba09ec4\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:10.068563", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:10.068486\", \"message\": \"Request completed\", \"request_id\": \"f8ccb93b-e52f-4cc9-965e-1d171ba09ec4\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.73, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:13.066886", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:13.066800\", \"message\": \"Request started\", \"request_id\": \"1787427a-32b8-4033-aee5-ea1a4c1ee7c1\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:13.069405", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:13.069309\", \"message\": \"Request error\", \"request_id\": \"1787427a-32b8-4033-aee5-ea1a4c1ee7c1\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:13.069678", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:13.069572\", \"message\": \"Request completed\", \"request_id\": \"1787427a-32b8-4033-aee5-ea1a4c1ee7c1\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.81, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:16.065579", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:16.065486\", \"message\": \"Request started\", \"request_id\": \"0e924197-0bc8-479a-93a9-b6966654dc84\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:16.068145", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:16.068065\", \"message\": \"Request error\", \"request_id\": \"0e924197-0bc8-479a-93a9-b6966654dc84\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:16.068418", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:16.068314\", \"message\": \"Request completed\", \"request_id\": \"0e924197-0bc8-479a-93a9-b6966654dc84\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.87, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:18.169642", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:18.169528\", \"message\": \"Request started\", \"request_id\": \"82a329e3-bd81-4f3e-ad19-5065ade18fde\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:18.172157", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:18.172067\", \"message\": \"Request error\", \"request_id\": \"82a329e3-bd81-4f3e-ad19-5065ade18fde\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:18.172427", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:18.172322\", \"message\": \"Request completed\", \"request_id\": \"82a329e3-bd81-4f3e-ad19-5065ade18fde\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.83, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:18.420371", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:18.420265\", \"message\": \"Request started\", \"request_id\": \"67cd8daa-9ca9-42e7-a7de-64a20b06bf5b\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:18.423961", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:18.423838\", \"message\": \"Request error\", \"request_id\": \"67cd8daa-9ca9-42e7-a7de-64a20b06bf5b\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:18.424240", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:18.424153\", \"message\": \"Request completed\", \"request_id\": \"67cd8daa-9ca9-42e7-a7de-64a20b06bf5b\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.91, \"duration_seconds\": 0.004, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:19.064211", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:19.064124\", \"message\": \"Request started\", \"request_id\": \"ade859de-9cf0-4bf9-a460-d3a291b5468c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:19.067156", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:19.067061\", \"message\": \"Request error\", \"request_id\": \"ade859de-9cf0-4bf9-a460-d3a291b5468c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:19.067416", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:19.067331\", \"message\": \"Request completed\", \"request_id\": \"ade859de-9cf0-4bf9-a460-d3a291b5468c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.25, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:19.569770", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:19.569683\", \"message\": \"Request started\", \"request_id\": \"19412e51-1e34-43b1-8cb7-b08326be7699\", \"method\": \"GET\", \"path\": \"/api/v1/models\", \"query_params\": \"is_active=true\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:19.570992", "level": "WARNING", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:19.570918\", \"message\": \"Request completed\", \"request_id\": \"19412e51-1e34-43b1-8cb7-b08326be7699\", \"method\": \"GET\", \"path\": \"/api/v1/models\", \"status_code\": 404, \"duration_ms\": 1.28, \"duration_seconds\": 0.001}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:19.573001", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:19.572876\", \"message\": \"Request started\", \"request_id\": \"ac9f42cf-86b8-4902-8505-a5d100256129\", \"method\": \"GET\", \"path\": \"/api/v1/models\", \"query_params\": \"is_active=true\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:19.574185", "level": "WARNING", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:19.574116\", \"message\": \"Request completed\", \"request_id\": \"ac9f42cf-86b8-4902-8505-a5d100256129\", \"method\": \"GET\", \"path\": \"/api/v1/models\", \"status_code\": 404, \"duration_ms\": 1.28, \"duration_seconds\": 0.001}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:22.066989", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:22.066904\", \"message\": \"Request started\", \"request_id\": \"898c4241-c838-442c-9f2e-9845280aee20\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:22.069422", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:22.069334\", \"message\": \"Request error\", \"request_id\": \"898c4241-c838-442c-9f2e-9845280aee20\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:22.069666", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:22.069591\", \"message\": \"Request completed\", \"request_id\": \"898c4241-c838-442c-9f2e-9845280aee20\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.73, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:25.065885", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:25.065793\", \"message\": \"Request started\", \"request_id\": \"30e0ba5a-5cd9-4bd1-8d83-ddd918468286\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:25.068303", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:25.068213\", \"message\": \"Request error\", \"request_id\": \"30e0ba5a-5cd9-4bd1-8d83-ddd918468286\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:25.068587", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:25.068483\", \"message\": \"Request completed\", \"request_id\": \"30e0ba5a-5cd9-4bd1-8d83-ddd918468286\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.74, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:28.369187", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:28.369074\", \"message\": \"Request started\", \"request_id\": \"b91b5c8b-166e-47b0-b9a7-b81525f2cb66\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:28.371754", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:28.371650\", \"message\": \"Request error\", \"request_id\": \"b91b5c8b-166e-47b0-b9a7-b81525f2cb66\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:28.371977", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:28.371912\", \"message\": \"Request completed\", \"request_id\": \"b91b5c8b-166e-47b0-b9a7-b81525f2cb66\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.9, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:31.065056", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:31.064970\", \"message\": \"Request started\", \"request_id\": \"c8d0561c-f8fd-4711-976e-268de5b92ff4\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:31.067474", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:31.067391\", \"message\": \"Request error\", \"request_id\": \"c8d0561c-f8fd-4711-976e-268de5b92ff4\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:31.067754", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:31.067649\", \"message\": \"Request completed\", \"request_id\": \"c8d0561c-f8fd-4711-976e-268de5b92ff4\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.72, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:34.366813", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:34.366675\", \"message\": \"Request started\", \"request_id\": \"402cad8f-ba27-4893-b78e-a6f73b90dc43\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:34.369276", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:34.369196\", \"message\": \"Request error\", \"request_id\": \"402cad8f-ba27-4893-b78e-a6f73b90dc43\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:34.369512", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:34.369439\", \"message\": \"Request completed\", \"request_id\": \"402cad8f-ba27-4893-b78e-a6f73b90dc43\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.82, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:37.065406", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:37.065318\", \"message\": \"Request started\", \"request_id\": \"4bc415b0-1885-4928-a5e4-a1a92af4b46f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:37.068299", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:37.068204\", \"message\": \"Request error\", \"request_id\": \"4bc415b0-1885-4928-a5e4-a1a92af4b46f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:37.068618", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:37.068506\", \"message\": \"Request completed\", \"request_id\": \"4bc415b0-1885-4928-a5e4-a1a92af4b46f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.22, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:40.366544", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:40.366459\", \"message\": \"Request started\", \"request_id\": \"bb4f8f83-b7d4-478c-88a9-02e6e84d1921\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:40.369569", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:40.369464\", \"message\": \"Request error\", \"request_id\": \"bb4f8f83-b7d4-478c-88a9-02e6e84d1921\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:40.369842", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:40.369758\", \"message\": \"Request completed\", \"request_id\": \"bb4f8f83-b7d4-478c-88a9-02e6e84d1921\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.33, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:43.064865", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:43.064772\", \"message\": \"Request started\", \"request_id\": \"7141ff26-c230-48ed-acfc-8e16b3440f5f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:43.067423", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:43.067315\", \"message\": \"Request error\", \"request_id\": \"7141ff26-c230-48ed-acfc-8e16b3440f5f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:43.067736", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:43.067647\", \"message\": \"Request completed\", \"request_id\": \"7141ff26-c230-48ed-acfc-8e16b3440f5f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.91, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:46.366132", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:46.366020\", \"message\": \"Request started\", \"request_id\": \"ba6c8627-e59d-4647-8335-1cfd5fffdce4\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:46.368708", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:46.368615\", \"message\": \"Request error\", \"request_id\": \"ba6c8627-e59d-4647-8335-1cfd5fffdce4\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:46.369017", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:46.368903\", \"message\": \"Request completed\", \"request_id\": \"ba6c8627-e59d-4647-8335-1cfd5fffdce4\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.93, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:49.065177", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:49.065086\", \"message\": \"Request started\", \"request_id\": \"a131856d-13cd-4cfc-9c0e-ae4aef82ff45\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:49.068195", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:49.068077\", \"message\": \"Request error\", \"request_id\": \"a131856d-13cd-4cfc-9c0e-ae4aef82ff45\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:49.068474", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:49.068387\", \"message\": \"Request completed\", \"request_id\": \"a131856d-13cd-4cfc-9c0e-ae4aef82ff45\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.35, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:52.367163", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:52.367077\", \"message\": \"Request started\", \"request_id\": \"adbde506-8e5f-46c4-a565-628fe2c262b8\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:52.369771", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:52.369675\", \"message\": \"Request error\", \"request_id\": \"adbde506-8e5f-46c4-a565-628fe2c262b8\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:52.370003", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:52.369933\", \"message\": \"Request completed\", \"request_id\": \"adbde506-8e5f-46c4-a565-628fe2c262b8\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.9, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:55.066479", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:55.066395\", \"message\": \"Request started\", \"request_id\": \"60c9e07e-559a-4448-9849-3aac9a9a479c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:55.068870", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:55.068781\", \"message\": \"Request error\", \"request_id\": \"60c9e07e-559a-4448-9849-3aac9a9a479c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:55.069121", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:55.069040\", \"message\": \"Request completed\", \"request_id\": \"60c9e07e-559a-4448-9849-3aac9a9a479c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.67, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:58.367910", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:58.367781\", \"message\": \"Request started\", \"request_id\": \"ed7435fc-9324-47bb-bde6-bf125f32049e\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:58.370559", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:58.370459\", \"message\": \"Request error\", \"request_id\": \"ed7435fc-9324-47bb-bde6-bf125f32049e\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:07:58.370819", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:07:58.370742\", \"message\": \"Request completed\", \"request_id\": \"ed7435fc-9324-47bb-bde6-bf125f32049e\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.01, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:01.065012", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:01.064916\", \"message\": \"Request started\", \"request_id\": \"78714354-86d1-48c3-a263-0501bcf43266\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:01.067582", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:01.067477\", \"message\": \"Request error\", \"request_id\": \"78714354-86d1-48c3-a263-0501bcf43266\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:01.067847", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:01.067772\", \"message\": \"Request completed\", \"request_id\": \"78714354-86d1-48c3-a263-0501bcf43266\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.9, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:04.367312", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:04.367222\", \"message\": \"Request started\", \"request_id\": \"34218892-59dc-464d-b0ae-0a2b1cb89c4d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:04.370418", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:04.370298\", \"message\": \"Request error\", \"request_id\": \"34218892-59dc-464d-b0ae-0a2b1cb89c4d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:04.370717", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:04.370606\", \"message\": \"Request completed\", \"request_id\": \"34218892-59dc-464d-b0ae-0a2b1cb89c4d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.42, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:07.067254", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:07.067152\", \"message\": \"Request started\", \"request_id\": \"b6031ca7-06f8-4b99-a8e2-c167b4032c29\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:07.071125", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:07.070953\", \"message\": \"Request error\", \"request_id\": \"b6031ca7-06f8-4b99-a8e2-c167b4032c29\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:07.071520", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:07.071400\", \"message\": \"Request completed\", \"request_id\": \"b6031ca7-06f8-4b99-a8e2-c167b4032c29\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 4.5, \"duration_seconds\": 0.004, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:10.365860", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:10.365598\", \"message\": \"Request started\", \"request_id\": \"ed852e82-36c8-4d79-a4e3-93ad24494d8f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:10.370379", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:10.370199\", \"message\": \"Request error\", \"request_id\": \"ed852e82-36c8-4d79-a4e3-93ad24494d8f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:10.370809", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:10.370663\", \"message\": \"Request completed\", \"request_id\": \"ed852e82-36c8-4d79-a4e3-93ad24494d8f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 5.15, \"duration_seconds\": 0.005, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:13.066121", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:13.066033\", \"message\": \"Request started\", \"request_id\": \"a454e47c-1458-4148-9d8e-a0f7f39a73cc\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:13.068798", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:13.068696\", \"message\": \"Request error\", \"request_id\": \"a454e47c-1458-4148-9d8e-a0f7f39a73cc\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:13.069076", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:13.068978\", \"message\": \"Request completed\", \"request_id\": \"a454e47c-1458-4148-9d8e-a0f7f39a73cc\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.98, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:16.367811", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:16.367717\", \"message\": \"Request started\", \"request_id\": \"3097f1d9-d089-45df-ad33-376951da30df\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:16.370903", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:16.370780\", \"message\": \"Request error\", \"request_id\": \"3097f1d9-d089-45df-ad33-376951da30df\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:16.371332", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:16.371203\", \"message\": \"Request completed\", \"request_id\": \"3097f1d9-d089-45df-ad33-376951da30df\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.52, \"duration_seconds\": 0.004, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:19.066893", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:19.066803\", \"message\": \"Request started\", \"request_id\": \"075eed6a-86d2-498c-b1c9-8ed9048f4357\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:19.069880", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:19.069777\", \"message\": \"Request error\", \"request_id\": \"075eed6a-86d2-498c-b1c9-8ed9048f4357\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:19.070131", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:19.070056\", \"message\": \"Request completed\", \"request_id\": \"075eed6a-86d2-498c-b1c9-8ed9048f4357\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.3, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:22.368352", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:22.368256\", \"message\": \"Request started\", \"request_id\": \"f34b3c30-9331-4ae3-8472-57bb99fd1e8b\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:22.371337", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:22.371192\", \"message\": \"Request error\", \"request_id\": \"f34b3c30-9331-4ae3-8472-57bb99fd1e8b\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:22.371678", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:22.371588\", \"message\": \"Request completed\", \"request_id\": \"f34b3c30-9331-4ae3-8472-57bb99fd1e8b\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.38, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:25.067116", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:25.066992\", \"message\": \"Request started\", \"request_id\": \"5c3c5d2b-dbfa-44f9-99f0-6155dce851bb\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:25.072544", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:25.072366\", \"message\": \"Request error\", \"request_id\": \"5c3c5d2b-dbfa-44f9-99f0-6155dce851bb\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:25.073118", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:25.072977\", \"message\": \"Request completed\", \"request_id\": \"5c3c5d2b-dbfa-44f9-99f0-6155dce851bb\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 6.08, \"duration_seconds\": 0.006, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:28.369265", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:28.369172\", \"message\": \"Request started\", \"request_id\": \"50589abe-d6bc-43f9-92a0-a142f8ab4ea9\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:28.373042", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:28.372927\", \"message\": \"Request error\", \"request_id\": \"50589abe-d6bc-43f9-92a0-a142f8ab4ea9\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:28.373386", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:28.373291\", \"message\": \"Request completed\", \"request_id\": \"50589abe-d6bc-43f9-92a0-a142f8ab4ea9\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 4.16, \"duration_seconds\": 0.004, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:31.064917", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:31.064822\", \"message\": \"Request started\", \"request_id\": \"5f01fe28-b2a5-4fc9-b22a-39af5f3ee3fe\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:31.067677", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:31.067573\", \"message\": \"Request error\", \"request_id\": \"5f01fe28-b2a5-4fc9-b22a-39af5f3ee3fe\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:31.067943", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:31.067854\", \"message\": \"Request completed\", \"request_id\": \"5f01fe28-b2a5-4fc9-b22a-39af5f3ee3fe\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.08, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:34.368243", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:34.368131\", \"message\": \"Request started\", \"request_id\": \"235c7e59-0e65-411e-9428-f7222383564d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:34.371003", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:34.370901\", \"message\": \"Request error\", \"request_id\": \"235c7e59-0e65-411e-9428-f7222383564d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:34.371281", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:34.371182\", \"message\": \"Request completed\", \"request_id\": \"235c7e59-0e65-411e-9428-f7222383564d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.1, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:37.066024", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:37.065928\", \"message\": \"Request started\", \"request_id\": \"ce7b65c6-71ac-456a-8725-af202679ebab\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:37.068564", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:37.068478\", \"message\": \"Request error\", \"request_id\": \"ce7b65c6-71ac-456a-8725-af202679ebab\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:37.068820", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:37.068727\", \"message\": \"Request completed\", \"request_id\": \"ce7b65c6-71ac-456a-8725-af202679ebab\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.84, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:40.366317", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:40.366226\", \"message\": \"Request started\", \"request_id\": \"34f363f2-41aa-4f11-a13b-12fddb2664a6\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:40.369139", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:40.369029\", \"message\": \"Request error\", \"request_id\": \"34f363f2-41aa-4f11-a13b-12fddb2664a6\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:40.369436", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:40.369333\", \"message\": \"Request completed\", \"request_id\": \"34f363f2-41aa-4f11-a13b-12fddb2664a6\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.14, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:43.064692", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:43.064606\", \"message\": \"Request started\", \"request_id\": \"79b32ab4-e6b4-4cfc-a5e7-5f73ffc0673d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:43.067208", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:43.067124\", \"message\": \"Request error\", \"request_id\": \"79b32ab4-e6b4-4cfc-a5e7-5f73ffc0673d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:43.067466", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:43.067369\", \"message\": \"Request completed\", \"request_id\": \"79b32ab4-e6b4-4cfc-a5e7-5f73ffc0673d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.8, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:46.367389", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:46.367271\", \"message\": \"Request started\", \"request_id\": \"b873dbdc-bb17-4fb3-be91-ab2c51536f1f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:46.370199", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:46.370104\", \"message\": \"Request error\", \"request_id\": \"b873dbdc-bb17-4fb3-be91-ab2c51536f1f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:46.370498", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:46.370384\", \"message\": \"Request completed\", \"request_id\": \"b873dbdc-bb17-4fb3-be91-ab2c51536f1f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.16, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:49.066973", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:49.066849\", \"message\": \"Request started\", \"request_id\": \"74cee720-a48f-4502-9aaf-d4bf7b3b1a63\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:49.073716", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:49.073535\", \"message\": \"Request error\", \"request_id\": \"74cee720-a48f-4502-9aaf-d4bf7b3b1a63\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:49.074679", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:49.074504\", \"message\": \"Request completed\", \"request_id\": \"74cee720-a48f-4502-9aaf-d4bf7b3b1a63\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 7.7, \"duration_seconds\": 0.008, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:52.367468", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:52.367358\", \"message\": \"Request started\", \"request_id\": \"85151be1-df31-4b44-878b-35d56b0f5a04\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:52.370433", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:52.370332\", \"message\": \"Request error\", \"request_id\": \"85151be1-df31-4b44-878b-35d56b0f5a04\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:52.370687", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:52.370605\", \"message\": \"Request completed\", \"request_id\": \"85151be1-df31-4b44-878b-35d56b0f5a04\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.34, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:55.064679", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:55.064593\", \"message\": \"Request started\", \"request_id\": \"71ff0213-c3ee-4929-ac82-8937f2930cdb\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:55.067788", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:55.067678\", \"message\": \"Request error\", \"request_id\": \"71ff0213-c3ee-4929-ac82-8937f2930cdb\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:55.068083", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:55.067968\", \"message\": \"Request completed\", \"request_id\": \"71ff0213-c3ee-4929-ac82-8937f2930cdb\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.41, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:58.365635", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:58.365551\", \"message\": \"Request started\", \"request_id\": \"71f1b462-0c84-442f-87de-fb86fdc98df9\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:58.369301", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:58.369200\", \"message\": \"Request error\", \"request_id\": \"71f1b462-0c84-442f-87de-fb86fdc98df9\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:08:58.369605", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:08:58.369503\", \"message\": \"Request completed\", \"request_id\": \"71f1b462-0c84-442f-87de-fb86fdc98df9\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 4.01, \"duration_seconds\": 0.004, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:01.064672", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:01.064587\", \"message\": \"Request started\", \"request_id\": \"11d6991c-cc4c-4b48-aa92-d9e9eeae70cf\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:01.067924", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:01.067832\", \"message\": \"Request error\", \"request_id\": \"11d6991c-cc4c-4b48-aa92-d9e9eeae70cf\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:01.068207", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:01.068099\", \"message\": \"Request completed\", \"request_id\": \"11d6991c-cc4c-4b48-aa92-d9e9eeae70cf\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.55, \"duration_seconds\": 0.004, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:04.367139", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:04.367043\", \"message\": \"Request started\", \"request_id\": \"bfc9e1ba-49ec-4f9c-908f-da215f61dcb5\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:04.369815", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:04.369723\", \"message\": \"Request error\", \"request_id\": \"bfc9e1ba-49ec-4f9c-908f-da215f61dcb5\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:04.370082", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:04.370005\", \"message\": \"Request completed\", \"request_id\": \"bfc9e1ba-49ec-4f9c-908f-da215f61dcb5\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.02, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:07.064931", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:07.064840\", \"message\": \"Request started\", \"request_id\": \"9029b473-0612-4b7a-a6c6-7affa680e11e\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:07.067481", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:07.067385\", \"message\": \"Request error\", \"request_id\": \"9029b473-0612-4b7a-a6c6-7affa680e11e\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:07.067812", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:07.067668\", \"message\": \"Request completed\", \"request_id\": \"9029b473-0612-4b7a-a6c6-7affa680e11e\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.87, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:10.367823", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:10.367725\", \"message\": \"Request started\", \"request_id\": \"92ccf0af-208f-4c61-9a5e-9c03d31873a4\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:10.370445", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:10.370357\", \"message\": \"Request error\", \"request_id\": \"92ccf0af-208f-4c61-9a5e-9c03d31873a4\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:10.370677", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:10.370603\", \"message\": \"Request completed\", \"request_id\": \"92ccf0af-208f-4c61-9a5e-9c03d31873a4\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.93, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:13.066395", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:13.066307\", \"message\": \"Request started\", \"request_id\": \"92b7c039-7b69-4791-ae74-c54360c18fbf\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:13.069322", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:13.069218\", \"message\": \"Request error\", \"request_id\": \"92b7c039-7b69-4791-ae74-c54360c18fbf\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:13.069558", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:13.069497\", \"message\": \"Request completed\", \"request_id\": \"92b7c039-7b69-4791-ae74-c54360c18fbf\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.23, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:16.366030", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:16.365940\", \"message\": \"Request started\", \"request_id\": \"9c89bcc5-0f98-4eee-847b-ad5476a59762\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:16.369194", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:16.369051\", \"message\": \"Request error\", \"request_id\": \"9c89bcc5-0f98-4eee-847b-ad5476a59762\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:16.369522", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:16.369433\", \"message\": \"Request completed\", \"request_id\": \"9c89bcc5-0f98-4eee-847b-ad5476a59762\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.53, \"duration_seconds\": 0.004, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:19.065717", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:19.065610\", \"message\": \"Request started\", \"request_id\": \"93f12d86-dd6f-446f-8b77-2be1fec35f0a\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:19.068322", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:19.068235\", \"message\": \"Request error\", \"request_id\": \"93f12d86-dd6f-446f-8b77-2be1fec35f0a\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:19.068566", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:19.068491\", \"message\": \"Request completed\", \"request_id\": \"93f12d86-dd6f-446f-8b77-2be1fec35f0a\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.94, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:22.367905", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:22.367821\", \"message\": \"Request started\", \"request_id\": \"35388138-1382-4df0-87a4-b1e36df73c14\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:22.370467", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:22.370372\", \"message\": \"Request error\", \"request_id\": \"35388138-1382-4df0-87a4-b1e36df73c14\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:22.370709", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:22.370634\", \"message\": \"Request completed\", \"request_id\": \"35388138-1382-4df0-87a4-b1e36df73c14\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.85, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:25.065884", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:25.065800\", \"message\": \"Request started\", \"request_id\": \"ce8106b2-b671-4de5-856e-4fb6056f6721\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:25.068360", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:25.068272\", \"message\": \"Request error\", \"request_id\": \"ce8106b2-b671-4de5-856e-4fb6056f6721\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:25.068598", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:25.068522\", \"message\": \"Request completed\", \"request_id\": \"ce8106b2-b671-4de5-856e-4fb6056f6721\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.76, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:28.368185", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:28.368094\", \"message\": \"Request started\", \"request_id\": \"a8481d85-a1fa-44a3-9e16-a20177c9776c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:28.370628", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:28.370543\", \"message\": \"Request error\", \"request_id\": \"a8481d85-a1fa-44a3-9e16-a20177c9776c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:28.370856", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:28.370794\", \"message\": \"Request completed\", \"request_id\": \"a8481d85-a1fa-44a3-9e16-a20177c9776c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.74, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:31.065917", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:31.065831\", \"message\": \"Request started\", \"request_id\": \"7801354b-38a1-4cc4-be59-f8caf2b3aafb\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:31.068407", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:31.068318\", \"message\": \"Request error\", \"request_id\": \"7801354b-38a1-4cc4-be59-f8caf2b3aafb\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:31.068684", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:31.068584\", \"message\": \"Request completed\", \"request_id\": \"7801354b-38a1-4cc4-be59-f8caf2b3aafb\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.79, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:34.368019", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:34.367904\", \"message\": \"Request started\", \"request_id\": \"04136dbd-7d1b-40bd-acc7-aa54ddff8f0e\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:34.370526", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:34.370437\", \"message\": \"Request error\", \"request_id\": \"04136dbd-7d1b-40bd-acc7-aa54ddff8f0e\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:34.370766", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:34.370693\", \"message\": \"Request completed\", \"request_id\": \"04136dbd-7d1b-40bd-acc7-aa54ddff8f0e\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.86, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:37.064983", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:37.064897\", \"message\": \"Request started\", \"request_id\": \"94c9ac9e-cd7b-42d8-a400-0644778e61f7\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:37.067834", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:37.067731\", \"message\": \"Request error\", \"request_id\": \"94c9ac9e-cd7b-42d8-a400-0644778e61f7\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:37.068089", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:37.068003\", \"message\": \"Request completed\", \"request_id\": \"94c9ac9e-cd7b-42d8-a400-0644778e61f7\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.15, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:40.366267", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:40.366173\", \"message\": \"Request started\", \"request_id\": \"1772f2d9-1bd0-4779-8e26-f5507fc2d377\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:40.369344", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:40.369218\", \"message\": \"Request error\", \"request_id\": \"1772f2d9-1bd0-4779-8e26-f5507fc2d377\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:40.369630", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:40.369556\", \"message\": \"Request completed\", \"request_id\": \"1772f2d9-1bd0-4779-8e26-f5507fc2d377\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.43, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:43.065444", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:43.065359\", \"message\": \"Request started\", \"request_id\": \"db9f6e90-e0b9-4e09-91fb-5c1edd998ba3\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:43.068156", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:43.068042\", \"message\": \"Request error\", \"request_id\": \"db9f6e90-e0b9-4e09-91fb-5c1edd998ba3\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:43.068456", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:43.068342\", \"message\": \"Request completed\", \"request_id\": \"db9f6e90-e0b9-4e09-91fb-5c1edd998ba3\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.02, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:46.367491", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:46.367398\", \"message\": \"Request started\", \"request_id\": \"dc5070d5-8419-491b-9463-6addf96a2274\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:46.369991", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:46.369890\", \"message\": \"Request error\", \"request_id\": \"dc5070d5-8419-491b-9463-6addf96a2274\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:46.370253", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:46.370181\", \"message\": \"Request completed\", \"request_id\": \"dc5070d5-8419-491b-9463-6addf96a2274\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.83, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:49.065084", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:49.064995\", \"message\": \"Request started\", \"request_id\": \"87be8f95-c5a9-414c-a417-645827c6ced8\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:49.068418", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:49.068279\", \"message\": \"Request error\", \"request_id\": \"87be8f95-c5a9-414c-a417-645827c6ced8\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:49.068802", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:49.068675\", \"message\": \"Request completed\", \"request_id\": \"87be8f95-c5a9-414c-a417-645827c6ced8\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.72, \"duration_seconds\": 0.004, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:52.367596", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:52.367495\", \"message\": \"Request started\", \"request_id\": \"03281220-55e0-41b3-a841-09d35a873ce7\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:52.370743", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:52.370638\", \"message\": \"Request error\", \"request_id\": \"03281220-55e0-41b3-a841-09d35a873ce7\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:52.371008", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:52.370920\", \"message\": \"Request completed\", \"request_id\": \"03281220-55e0-41b3-a841-09d35a873ce7\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.46, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:55.065119", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:55.065028\", \"message\": \"Request started\", \"request_id\": \"bfb9bc70-960f-41db-8017-0ec857fd7cab\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:55.067742", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:55.067648\", \"message\": \"Request error\", \"request_id\": \"bfb9bc70-960f-41db-8017-0ec857fd7cab\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:55.067985", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:55.067909\", \"message\": \"Request completed\", \"request_id\": \"bfb9bc70-960f-41db-8017-0ec857fd7cab\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.92, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:58.367376", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:58.367287\", \"message\": \"Request started\", \"request_id\": \"e7b3672c-fc27-4714-8b4e-29195ce6913c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:58.370696", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:58.370603\", \"message\": \"Request error\", \"request_id\": \"e7b3672c-fc27-4714-8b4e-29195ce6913c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:09:58.370962", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:09:58.370873\", \"message\": \"Request completed\", \"request_id\": \"e7b3672c-fc27-4714-8b4e-29195ce6913c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.62, \"duration_seconds\": 0.004, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:01.064876", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:01.064788\", \"message\": \"Request started\", \"request_id\": \"389dc4aa-2a1f-42db-9096-1ce2a4f269de\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:01.067326", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:01.067235\", \"message\": \"Request error\", \"request_id\": \"389dc4aa-2a1f-42db-9096-1ce2a4f269de\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:01.067620", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:01.067545\", \"message\": \"Request completed\", \"request_id\": \"389dc4aa-2a1f-42db-9096-1ce2a4f269de\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.8, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:04.367385", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:04.367271\", \"message\": \"Request started\", \"request_id\": \"6c594056-5ad8-4501-bfad-da57720fa7b3\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:04.369985", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:04.369890\", \"message\": \"Request error\", \"request_id\": \"6c594056-5ad8-4501-bfad-da57720fa7b3\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:04.370226", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:04.370148\", \"message\": \"Request completed\", \"request_id\": \"6c594056-5ad8-4501-bfad-da57720fa7b3\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.95, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:07.064950", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:07.064864\", \"message\": \"Request started\", \"request_id\": \"02fd715c-dcfd-478b-be02-dbdc195b3b41\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:07.067547", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:07.067456\", \"message\": \"Request error\", \"request_id\": \"02fd715c-dcfd-478b-be02-dbdc195b3b41\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:07.067781", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:07.067709\", \"message\": \"Request completed\", \"request_id\": \"02fd715c-dcfd-478b-be02-dbdc195b3b41\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.89, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:10.367209", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:10.367112\", \"message\": \"Request started\", \"request_id\": \"dbe85b33-3a57-4164-a840-1655639bcc81\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:10.369880", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:10.369790\", \"message\": \"Request error\", \"request_id\": \"dbe85b33-3a57-4164-a840-1655639bcc81\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:10.370118", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:10.370045\", \"message\": \"Request completed\", \"request_id\": \"dbe85b33-3a57-4164-a840-1655639bcc81\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.97, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:13.065250", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:13.065153\", \"message\": \"Request started\", \"request_id\": \"05048abe-528e-4b1e-bf13-754ca7d98b6e\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:13.068942", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:13.068838\", \"message\": \"Request error\", \"request_id\": \"05048abe-528e-4b1e-bf13-754ca7d98b6e\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    async def get_db() -> AsyncIOMotorDatabase:\\n               ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:13.069248", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:13.069121\", \"message\": \"Request completed\", \"request_id\": \"05048abe-528e-4b1e-bf13-754ca7d98b6e\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 4.01, \"duration_seconds\": 0.004, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 21, in get_db\\n    async def get_db() -> AsyncIOMotorDatabase:\\n               ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:13.242709", "level": "INFO", "logger": "storycanvas", "message": "Shutting down application...", "module": "server", "function": "shutdown_db_client", "line": 5733, "taskName": "Task-2"}
{"timestamp": "2025-11-02T08:10:13.242884", "level": "INFO", "logger": "database", "message": "Closing MongoDB connection", "module": "database", "function": "disconnect", "line": 116, "taskName": "Task-2"}
{"timestamp": "2025-11-02T08:10:13.244250", "level": "INFO", "logger": "storycanvas", "message": "Application shut down complete", "module": "server", "function": "shutdown_db_client", "line": 5735, "taskName": "Task-2"}
{"timestamp": "2025-11-02T08:10:15.749727", "level": "INFO", "logger": "storycanvas", "message": "Starting application...", "module": "server", "function": "startup_db_client", "line": 5687, "taskName": "Task-2"}
{"timestamp": "2025-11-02T08:10:15.749907", "level": "INFO", "logger": "database", "message": "Attempting to connect to MongoDB (attempt 1/5)", "module": "database", "function": "connect", "line": 47, "taskName": "Task-2"}
{"timestamp": "2025-11-02T08:10:15.750012", "level": "INFO", "logger": "database", "message": "MongoDB URL: mongodb://***@192.168.1.10:27017", "module": "database", "function": "connect", "line": 48, "taskName": "Task-2"}
{"timestamp": "2025-11-02T08:10:15.777190", "level": "INFO", "logger": "database", "message": "Successfully connected to MongoDB database: storyboard", "module": "database", "function": "connect", "line": 66, "taskName": "Task-2"}
{"timestamp": "2025-11-02T08:10:15.777472", "level": "INFO", "logger": "storycanvas", "message": "Active models service initialized", "module": "server", "function": "startup_db_client", "line": 5699, "taskName": "Task-2"}
{"timestamp": "2025-11-02T08:10:15.779609", "level": "INFO", "logger": "storycanvas", "message": "Repositories initialized for queue, gallery, and batch services", "module": "server", "function": "startup_db_client", "line": 5717, "taskName": "Task-2"}
{"timestamp": "2025-11-02T08:10:15.779735", "level": "INFO", "logger": "storycanvas", "message": "Application started successfully", "module": "server", "function": "startup_db_client", "line": 5718, "taskName": "Task-2"}
{"timestamp": "2025-11-02T08:10:16.372039", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:16.371957\", \"message\": \"Request started\", \"request_id\": \"06312185-5b27-44d3-9e7b-db94d241c7c6\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:16.379718", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:16.379614\", \"message\": \"Request error\", \"request_id\": \"06312185-5b27-44d3-9e7b-db94d241c7c6\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:16.379981", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:16.379902\", \"message\": \"Request completed\", \"request_id\": \"06312185-5b27-44d3-9e7b-db94d241c7c6\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 8.02, \"duration_seconds\": 0.008, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:19.065270", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:19.065181\", \"message\": \"Request started\", \"request_id\": \"2a33fef5-a339-4c20-a2a2-a2fe71d19f5d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:19.067767", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:19.067679\", \"message\": \"Request error\", \"request_id\": \"2a33fef5-a339-4c20-a2a2-a2fe71d19f5d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:19.068033", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:19.067958\", \"message\": \"Request completed\", \"request_id\": \"2a33fef5-a339-4c20-a2a2-a2fe71d19f5d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.83, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:22.368687", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:22.368569\", \"message\": \"Request started\", \"request_id\": \"6bdba91c-2b13-41c5-970d-49966d890d6c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:22.371294", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:22.371173\", \"message\": \"Request error\", \"request_id\": \"6bdba91c-2b13-41c5-970d-49966d890d6c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:22.371584", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:22.371508\", \"message\": \"Request completed\", \"request_id\": \"6bdba91c-2b13-41c5-970d-49966d890d6c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.99, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:25.065082", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:25.064978\", \"message\": \"Request started\", \"request_id\": \"d777b8a9-f202-4cd7-81d4-6d803b4de6ed\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:25.067640", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:25.067563\", \"message\": \"Request error\", \"request_id\": \"d777b8a9-f202-4cd7-81d4-6d803b4de6ed\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:25.067913", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:25.067810\", \"message\": \"Request completed\", \"request_id\": \"d777b8a9-f202-4cd7-81d4-6d803b4de6ed\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.88, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:28.367342", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:28.367249\", \"message\": \"Request started\", \"request_id\": \"8bc7bd93-18ff-4d3c-b1d2-4a7673798536\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:28.369938", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:28.369843\", \"message\": \"Request error\", \"request_id\": \"8bc7bd93-18ff-4d3c-b1d2-4a7673798536\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:28.370223", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:28.370114\", \"message\": \"Request completed\", \"request_id\": \"8bc7bd93-18ff-4d3c-b1d2-4a7673798536\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.9, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:31.065164", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:31.065055\", \"message\": \"Request started\", \"request_id\": \"f7f634d9-86af-4aaa-ab95-143251ec5d35\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:31.067531", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:31.067438\", \"message\": \"Request error\", \"request_id\": \"f7f634d9-86af-4aaa-ab95-143251ec5d35\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:31.067783", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:31.067705\", \"message\": \"Request completed\", \"request_id\": \"f7f634d9-86af-4aaa-ab95-143251ec5d35\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.7, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:34.367806", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:34.367696\", \"message\": \"Request started\", \"request_id\": \"223b02d6-619f-4ff3-8e2b-67f343fe855d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:34.370677", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:34.370589\", \"message\": \"Request error\", \"request_id\": \"223b02d6-619f-4ff3-8e2b-67f343fe855d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:34.370922", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:34.370843\", \"message\": \"Request completed\", \"request_id\": \"223b02d6-619f-4ff3-8e2b-67f343fe855d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.2, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:37.065665", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:37.065579\", \"message\": \"Request started\", \"request_id\": \"43665784-6a43-40cf-881b-e2fd423916b4\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:37.068459", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:37.068367\", \"message\": \"Request error\", \"request_id\": \"43665784-6a43-40cf-881b-e2fd423916b4\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:37.068740", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:37.068670\", \"message\": \"Request completed\", \"request_id\": \"43665784-6a43-40cf-881b-e2fd423916b4\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.13, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:40.368951", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:40.368849\", \"message\": \"Request started\", \"request_id\": \"b44653ad-51fd-4f29-95ec-051f5220a983\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:40.371577", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:40.371459\", \"message\": \"Request error\", \"request_id\": \"b44653ad-51fd-4f29-95ec-051f5220a983\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:40.371926", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:40.371811\", \"message\": \"Request completed\", \"request_id\": \"b44653ad-51fd-4f29-95ec-051f5220a983\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.02, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:43.066140", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:43.066056\", \"message\": \"Request started\", \"request_id\": \"57e71fe9-b4c1-4395-9dfd-972e66a887f0\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:43.068583", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:43.068489\", \"message\": \"Request error\", \"request_id\": \"57e71fe9-b4c1-4395-9dfd-972e66a887f0\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:43.068859", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:43.068779\", \"message\": \"Request completed\", \"request_id\": \"57e71fe9-b4c1-4395-9dfd-972e66a887f0\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.76, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:46.366957", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:46.366850\", \"message\": \"Request started\", \"request_id\": \"e8086942-f472-4d11-b3ca-9405ffd54bef\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:46.369455", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:46.369376\", \"message\": \"Request error\", \"request_id\": \"e8086942-f472-4d11-b3ca-9405ffd54bef\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:46.369738", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:46.369634\", \"message\": \"Request completed\", \"request_id\": \"e8086942-f472-4d11-b3ca-9405ffd54bef\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.83, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:49.064841", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:49.064737\", \"message\": \"Request started\", \"request_id\": \"a78559b1-ed10-419f-bc31-3039522f5e35\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:49.067213", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:49.067131\", \"message\": \"Request error\", \"request_id\": \"a78559b1-ed10-419f-bc31-3039522f5e35\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:49.067439", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:49.067366\", \"message\": \"Request completed\", \"request_id\": \"a78559b1-ed10-419f-bc31-3039522f5e35\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.72, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:52.366073", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:52.365972\", \"message\": \"Request started\", \"request_id\": \"b9a96f0e-6bb1-4f68-a8d4-b08a5dfa307c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:52.368494", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:52.368404\", \"message\": \"Request error\", \"request_id\": \"b9a96f0e-6bb1-4f68-a8d4-b08a5dfa307c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:52.368733", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:52.368663\", \"message\": \"Request completed\", \"request_id\": \"b9a96f0e-6bb1-4f68-a8d4-b08a5dfa307c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.75, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:55.065865", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:55.065769\", \"message\": \"Request started\", \"request_id\": \"6a5fe13d-25d1-4bed-b7d6-74f30792995f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:55.068584", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:55.068488\", \"message\": \"Request error\", \"request_id\": \"6a5fe13d-25d1-4bed-b7d6-74f30792995f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:55.068827", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:55.068749\", \"message\": \"Request completed\", \"request_id\": \"6a5fe13d-25d1-4bed-b7d6-74f30792995f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.03, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:58.366797", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:58.366691\", \"message\": \"Request started\", \"request_id\": \"bbe5d857-7153-4c00-9350-82e37e95e422\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:58.369360", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:58.369271\", \"message\": \"Request error\", \"request_id\": \"bbe5d857-7153-4c00-9350-82e37e95e422\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:10:58.369590", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:10:58.369516\", \"message\": \"Request completed\", \"request_id\": \"bbe5d857-7153-4c00-9350-82e37e95e422\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.88, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:01.065362", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:01.065276\", \"message\": \"Request started\", \"request_id\": \"14a9687e-83b5-4aa9-ab7f-68e1f2424e79\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:01.067761", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:01.067673\", \"message\": \"Request error\", \"request_id\": \"14a9687e-83b5-4aa9-ab7f-68e1f2424e79\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:01.068061", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:01.067944\", \"message\": \"Request completed\", \"request_id\": \"14a9687e-83b5-4aa9-ab7f-68e1f2424e79\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.71, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:04.366730", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:04.366647\", \"message\": \"Request started\", \"request_id\": \"866d5522-3cd3-46ad-a8b8-9f1ffe641610\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:04.369100", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:04.369013\", \"message\": \"Request error\", \"request_id\": \"866d5522-3cd3-46ad-a8b8-9f1ffe641610\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:04.369342", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:04.369267\", \"message\": \"Request completed\", \"request_id\": \"866d5522-3cd3-46ad-a8b8-9f1ffe641610\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.67, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:07.064929", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:07.064840\", \"message\": \"Request started\", \"request_id\": \"4598a8df-aad0-407c-9b81-b6d5cdafb65d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:07.067687", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:07.067601\", \"message\": \"Request error\", \"request_id\": \"4598a8df-aad0-407c-9b81-b6d5cdafb65d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:07.067956", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:07.067849\", \"message\": \"Request completed\", \"request_id\": \"4598a8df-aad0-407c-9b81-b6d5cdafb65d\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.05, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:10.366825", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:10.366741\", \"message\": \"Request started\", \"request_id\": \"fe8c611f-43bb-4f07-843e-d2be9fcef431\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:10.369544", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:10.369455\", \"message\": \"Request error\", \"request_id\": \"fe8c611f-43bb-4f07-843e-d2be9fcef431\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:10.369780", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:10.369707\", \"message\": \"Request completed\", \"request_id\": \"fe8c611f-43bb-4f07-843e-d2be9fcef431\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.01, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:13.065757", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:13.065671\", \"message\": \"Request started\", \"request_id\": \"f3f06775-de7e-4edf-9f62-fa42eaa46a1c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:13.068214", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:13.068118\", \"message\": \"Request error\", \"request_id\": \"f3f06775-de7e-4edf-9f62-fa42eaa46a1c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:13.068509", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:13.068392\", \"message\": \"Request completed\", \"request_id\": \"f3f06775-de7e-4edf-9f62-fa42eaa46a1c\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.76, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:16.366659", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:16.366577\", \"message\": \"Request started\", \"request_id\": \"16222733-ec8e-40d7-b6be-0d0d1bb33253\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:16.369145", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:16.369051\", \"message\": \"Request error\", \"request_id\": \"16222733-ec8e-40d7-b6be-0d0d1bb33253\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:16.369465", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:16.369354\", \"message\": \"Request completed\", \"request_id\": \"16222733-ec8e-40d7-b6be-0d0d1bb33253\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.81, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:19.064554", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:19.064421\", \"message\": \"Request started\", \"request_id\": \"a042639c-0781-43cc-8f0d-babd75853649\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:19.066961", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:19.066878\", \"message\": \"Request error\", \"request_id\": \"a042639c-0781-43cc-8f0d-babd75853649\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:19.067304", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:19.067192\", \"message\": \"Request completed\", \"request_id\": \"a042639c-0781-43cc-8f0d-babd75853649\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.81, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:22.368311", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:22.368205\", \"message\": \"Request started\", \"request_id\": \"1cdae451-c08d-406b-b666-ca675e60f33f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:22.371108", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:22.371015\", \"message\": \"Request error\", \"request_id\": \"1cdae451-c08d-406b-b666-ca675e60f33f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:22.371366", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:22.371279\", \"message\": \"Request completed\", \"request_id\": \"1cdae451-c08d-406b-b666-ca675e60f33f\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 3.12, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:25.064752", "level": "INFO", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:25.064656\", \"message\": \"Request started\", \"request_id\": \"0bd82515-8de4-47ba-bc6a-ca4f980597fc\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"query_params\": \"status=processing%2Cpending%2Ccompleted&limit=50\", \"client_host\": \"127.0.0.1\", \"user_agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36\", \"content_type\": null, \"request_body\": null}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:25.067358", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:25.067246\", \"message\": \"Request error\", \"request_id\": \"0bd82515-8de4-47ba-bc6a-ca4f980597fc\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
{"timestamp": "2025-11-02T08:11:25.067634", "level": "ERROR", "logger": "storycanvas.request", "message": "{\"timestamp\": \"2025-11-02T08:11:25.067550\", \"message\": \"Request completed\", \"request_id\": \"0bd82515-8de4-47ba-bc6a-ca4f980597fc\", \"method\": \"GET\", \"path\": \"/api/v1/queue/jobs\", \"status_code\": 500, \"duration_ms\": 2.93, \"duration_seconds\": 0.003, \"error_type\": \"NotImplementedError\", \"error_message\": \"Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\", \"traceback\": \"Traceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 159, in call_next\\n    message = await recv_stream.receive()\\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\anyio\\\\streams\\\\memory.py\\\", line 126, in receive\\n    raise EndOfStream from None\\nanyio.EndOfStream\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\utils\\\\logging_middleware.py\\\", line 88, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 93, in __call__\\n    await self.simple_response(scope, receive, send, request_headers=headers)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\cors.py\\\", line 148, in simple_response\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 189, in __call__\\n    with collapse_excgroups():\\n         ~~~~~~~~~~~~~~~~~~^^\\n  File \\\"C:\\\\Python313\\\\Lib\\\\contextlib.py\\\", line 162, in __exit__\\n    self.gen.throw(value)\\n    ~~~~~~~~~~~~~~^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_utils.py\\\", line 93, in collapse_excgroups\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 191, in __call__\\n    response = await self.dispatch_func(request, call_next)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\server.py\\\", line 563, in dispatch\\n    response = await call_next(request)\\n               ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 165, in call_next\\n    raise app_exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\base.py\\\", line 151, in coro\\n    await self.app(scope, receive_or_disconnect, send_no_error)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\middleware\\\\exceptions.py\\\", line 65, in __call__\\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 756, in __call__\\n    await self.middleware_stack(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 776, in app\\n    await route.handle(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 297, in handle\\n    await self.app(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 77, in app\\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 64, in wrapped_app\\n    raise exc\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\_exception_handler.py\\\", line 53, in wrapped_app\\n    await app(scope, receive, sender)\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\starlette\\\\routing.py\\\", line 72, in app\\n    response = await func(request)\\n               ^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\routing.py\\\", line 269, in app\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<5 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 572, in solve_dependencies\\n    solved_result = await solve_dependencies(\\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\\n    ...<8 lines>...\\n    )\\n    ^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\fastapi\\\\dependencies\\\\utils.py\\\", line 600, in solve_dependencies\\n    solved = await call(**sub_values)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\api\\\\v1\\\\dependencies.py\\\", line 22, in get_db\\n    return await get_database()\\n           ^^^^^^^^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\database.py\\\", line 148, in get_database\\n    if not db_manager.db:\\n           ^^^^^^^^^^^^^\\n  File \\\"E:\\\\Code\\\\t-storeyboard\\\\storyboard\\\\backend\\\\venv\\\\Lib\\\\site-packages\\\\pymongo\\\\database.py\\\", line 1339, in __bool__\\n    raise NotImplementedError(\\n    ...<3 lines>...\\n    )\\nNotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None\\n\"}", "module": "logging_middleware", "function": "log", "line": 24, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}
